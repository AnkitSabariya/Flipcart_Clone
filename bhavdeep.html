<!DOCTYPE html>
<html lang="hi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>document</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<style>
  :root {
    --primary: #2874f0;
    --primary-dark: #1a5dc8;
    --secondary: #fb641b;
    --secondary-dark: #e05a17;
    --accent: #ff9f00;
    --accent-dark: #e68a00;
    --success: #388e3c;
    --danger: #ff4444;
    --danger-dark: #cc0000;
    --text-dark: #212121;
    --text-medium: #878787;
    --text-light: #f0f0f0;
    --bg-light: #f5f5f5;
    --border-light: #e0e0e0;
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.15);
    --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.2);
    --transition: all 0.3s ease;
    --border-radius: 8px;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ed 100%);
    color: var(--text-dark);
    line-height: 1.6;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    background: #fff;
    min-height: 100vh;
    box-shadow: var(--shadow-lg);
    position: relative;
    overflow-x: hidden;
  }

  /* Header Styles */
  .header {
    background: var(--primary);
    color: #fff;
    padding: 15px 30px;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    gap: 20px;
    position: sticky;
    top: 0;
    z-index: 1000;
    box-shadow: var(--shadow-sm);
  }

  .logo {
    font-size: 24px;
    font-weight: bold;
    letter-spacing: 1px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .logo i {
    font-size: 20px;
  }

  .search-bar {
    flex: 1;
    min-width: 250px;
    max-width: 550px;
    position: relative;
  }

  .search-bar input {
    width: 100%;
    padding: 12px 20px;
    font-size: 14px;
    border: none;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-sm);
    transition: var(--transition);
  }

  .search-bar input:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.3);
  }

  .search-btn {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: var(--primary);
    font-size: 18px;
    cursor: pointer;
    transition: var(--transition);
  }

  .search-btn:hover {
    color: var(--primary-dark);
  }

  .header-right {
    display: flex;
    align-items: center;
    gap: 25px;
  }

  .header-link {
    color: white;
    text-decoration: none;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 5px;
    transition: var(--transition);
  }

  .header-link:hover {
    opacity: 0.9;
    transform: translateY(-2px);
  }

  .cart-icon {
    cursor: pointer;
    position: relative;
    font-size: 20px;
    transition: var(--transition);
  }

  .cart-icon:hover {
    transform: scale(1.1);
  }

  .cart-count {
    position: absolute;
    top: -8px;
    right: -8px;
    background: var(--secondary);
    color: white;
    border-radius: 50%;
    padding: 2px 6px;
    font-size: 12px;
    font-weight: bold;
  }

  /* Product Container */
  .product-container {
    display: flex;
    flex-wrap: wrap;
    gap: 40px;
    padding: 30px;
  }

  .product-images {
    flex: 1;
    min-width: 300px;
    position: relative;
  }

  .main-image-container {
    position: relative;
    overflow: hidden;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-md);
    background: white;
    padding: 20px;
    height: 400px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid var(--border-light);
    transition: var(--transition);
  }

  .main-image-container:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-lg);
  }

  .main-image {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    cursor: zoom-in;
    transition: transform 0.5s ease;
  }

  .main-image:hover {
    transform: scale(1.05);
  }

  .thumbnail-container {
    display: flex;
    gap: 15px;
    margin-top: 20px;
    flex-wrap: wrap;
  }

  .thumbnail {
    width: 70px;
    height: 70px;
    object-fit: contain;
    border: 2px solid transparent;
    border-radius: 6px;
    padding: 5px;
    background: white;
    cursor: pointer;
    transition: var(--transition);
    box-shadow: var(--shadow-sm);
  }

  .thumbnail:hover {
    transform: scale(1.1);
    box-shadow: var(--shadow-md);
  }

  .thumbnail.active {
    border-color: var(--primary);
    transform: scale(1.05);
  }

  /* Product Details */
  .product-details {
    flex: 1;
    min-width: 300px;
    padding: 10px;
  }

  .product-title {
    font-size: 24px;
    margin-bottom: 15px;
    color: var(--text-dark);
    font-weight: 600;
    line-height: 1.3;
  }

  .rating-container {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 15px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--border-light);
  }

  .rating {
    background: var(--success);
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 14px;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 4px;
  }

  .rating-text {
    color: var(--text-medium);
    font-size: 14px;
  }

  .price-container {
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--border-light);
  }

  .current-price {
    font-size: 28px;
    font-weight: bold;
    color: var(--text-dark);
  }

  .original-price {
    text-decoration: line-through;
    margin-left: 10px;
    color: var(--text-medium);
    font-size: 18px;
  }

  .discount {
    margin-left: 10px;
    color: var(--success);
    font-weight: 500;
    font-size: 18px;
  }

  .offers,
  .specifications {
    margin-bottom: 25px;
  }

  .section-title {
    font-size: 18px;
    margin-bottom: 15px;
    color: var(--text-dark);
    font-weight: 600;
    position: relative;
    padding-bottom: 5px;
  }

  .section-title::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 50px;
    height: 2px;
    background: var(--primary);
  }

  .offer-item,
  .spec-row {
    margin-bottom: 12px;
    display: flex;
    gap: 8px;
  }

  .offer-tag {
    color: var(--primary);
    font-weight: 500;
  }

  .offer-text {
    color: var(--text-dark);
  }

  .spec-label {
    font-weight: 500;
    color: var(--text-medium);
    min-width: 120px;
  }

  .spec-value {
    color: var(--text-dark);
    flex: 1;
  }

  /* Action Buttons */
  .action-buttons {
    display: flex;
    gap: 15px;
    margin-top: 30px;
    flex-wrap: wrap;
  }

  .btn {
    padding: 14px 24px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    border: none;
    color: white;
    border-radius: var(--border-radius);
    transition: var(--transition);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    box-shadow: var(--shadow-sm);
    min-width: 180px;
  }

  .btn:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
  }

  .btn:active {
    transform: translateY(0);
  }

  .btn-cart {
    background: var(--accent);
  }

  .btn-cart:hover {
    background: var(--accent-dark);
  }

  .btn-buy {
    background: var(--secondary);
  }

  .btn-buy:hover {
    background: var(--secondary-dark);
  }

  /* Cart Panel */
  .cart-panel {
    position: fixed;
    top: 70px;
    right: 20px;
    width: 350px;
    background: #fff;
    box-shadow: var(--shadow-lg);
    padding: 20px;
    border-radius: var(--border-radius);
    display: none;
    z-index: 999;
    transform: translateY(20px);
    opacity: 0;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }

  .cart-panel.show {
    display: block;
    transform: translateY(0);
    opacity: 1;
  }

  .cart-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--border-light);
  }

  .cart-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-dark);
  }

  .close-cart {
    background: none;
    border: none;
    font-size: 18px;
    cursor: pointer;
    color: var(--text-medium);
    transition: var(--transition);
  }

  .close-cart:hover {
    color: var(--primary);
    transform: rotate(90deg);
  }

  .cart-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 15px;
    align-items: center;
    gap: 10px;
    padding: 10px;
    border-radius: 6px;
    transition: var(--transition);
    background: var(--bg-light);
  }

  .cart-item:hover {
    background: #f0f0f0;
    transform: translateX(5px);
  }

  .cart-item-name {
    flex: 1;
    font-size: 14px;
    font-weight: 500;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .cart-item-price {
    font-weight: bold;
    color: var(--text-dark);
    margin-left: 10px;
    min-width: 70px;
    text-align: right;
  }

  .cart-controls {
    display: flex;
    align-items: center;
    gap: 5px;
  }

  .cart-controls button {
    padding: 4px 10px;
    cursor: pointer;
    background-color: #eee;
    border: 1px solid #ddd;
    border-radius: 4px;
    transition: var(--transition);
    font-weight: bold;
  }

  .cart-controls button:hover {
    background-color: #ddd;
  }

  .remove-btn {
    background: var(--danger);
    color: white;
    border: none;
    padding: 5px 8px;
    margin-left: 5px;
    cursor: pointer;
    border-radius: 4px;
    font-size: 12px;
    transition: var(--transition);
  }

  .remove-btn:hover {
    background: var(--danger-dark);
  }

  .cart-total {
    margin-top: 20px;
    font-weight: bold;
    font-size: 18px;
    text-align: right;
    padding-top: 15px;
    border-top: 1px solid var(--border-light);
  }

  .empty-cart {
    text-align: center;
    padding: 20px;
    color: var(--text-medium);
  }

  /* Modal Styles */
  .modal-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    z-index: 1000;
    justify-content: center;
    align-items: center;
    backdrop-filter: blur(3px);
  }

  .modal-overlay.show {
    display: flex;
    animation: fadeIn 0.3s;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  .modal {
    background: white;
    padding: 30px;
    border-radius: var(--border-radius);
    max-width: 450px;
    width: 90%;
    position: relative;
    box-shadow: var(--shadow-lg);
    transform: translateY(-20px);
    opacity: 0;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }

  .modal-overlay.show .modal {
    transform: translateY(0);
    opacity: 1;
  }

  .modal-header {
    margin-bottom: 20px;
    text-align: center;
  }

  .modal-title {
    font-size: 22px;
    color: var(--primary);
    margin-bottom: 5px;
  }

  .modal-subtitle {
    color: var(--text-medium);
    font-size: 14px;
  }

  .form-group {
    margin-bottom: 15px;
  }

  .form-label {
    display: block;
    margin-bottom: 5px;
    font-weight: 500;
    color: var(--text-dark);
  }

  .form-input {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid var(--border-light);
    border-radius: 6px;
    font-size: 14px;
    transition: var(--transition);
  }

  .form-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 2px rgba(40, 116, 240, 0.2);
  }

  .form-textarea {
    min-height: 80px;
    resize: vertical;
  }

  .modal-footer {
    display: flex;
    justify-content: space-between;
    margin-top: 25px;
    gap: 15px;
    flex-wrap: wrap;
  }

  .modal-btn {
    padding: 12px 20px;
    border-radius: var(--border-radius);
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition);
    flex: 1;
    min-width: 120px;
    text-align: center;
  }

  .btn-primary {
    background: var(--primary);
    color: white;
    border: none;
  }

  .btn-primary:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
  }

  .btn-secondary {
    background: white;
    color: var(--primary);
    border: 1px solid var(--primary);
  }

  .btn-secondary:hover {
    background: #f0f5ff;
    transform: translateY(-2px);
  }

  .btn-close {
    position: absolute;
    top: 15px;
    right: 15px;
    background: none;
    border: none;
    font-size: 20px;
    cursor: pointer;
    color: var(--text-medium);
    transition: var(--transition);
  }

  .btn-close:hover {
    color: var(--primary);
    transform: rotate(90deg);
  }

  .location-info {
    font-size: 14px;
    margin-top: 10px;
    color: var(--success);
    display: flex;
    align-items: center;
    gap: 5px;
  }

  .success-message {
    text-align: center;
    padding: 20px;
  }

  .success-icon {
    font-size: 50px;
    color: var(--success);
    margin-bottom: 15px;
    animation: bounce 0.8s;
  }

  @keyframes bounce {
    0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
    40% {transform: translateY(-20px);}
    60% {transform: translateY(-10px);}
  }

  /* Animation Classes */
  .pulse {
    animation: pulse 0.5s;
  }

  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
  }

  /* Responsive Styles */
  @media (max-width: 992px) {
    .product-container {
      gap: 30px;
      padding: 20px;
    }
  }

  @media (max-width: 768px) {
    .header {
      padding: 15px;
      gap: 15px;
    }

    .search-bar {
      order: 3;
      width: 100%;
      min-width: auto;
    }

    .product-container {
      flex-direction: column;
    }

    .main-image-container {
      height: 350px;
    }

    .action-buttons {
      gap: 10px;
    }

    .btn {
      min-width: 140px;
      padding: 12px 15px;
    }

    .cart-panel {
      width: 90%;
      right: 5%;
      top: 80px;
    }
  }

  @media (max-width: 480px) {
    .header-right {
      gap: 15px;
    }

    .header-link span {
      display: none;
    }

    .product-title {
      font-size: 20px;
    }

    .current-price {
      font-size: 24px;
    }

    .original-price,
    .discount {
      font-size: 16px;
    }

    .thumbnail {
      width: 60px;
      height: 60px;
    }

    .modal {
      padding: 20px;
    }

    .modal-title {
      font-size: 20px;
    }
  }
</style>

<body>
  <div class="container">
    <header class="header">
      <div class="logo">
        <i class="fas fa-shopping-bag"></i>
        <span>Flipkart</span>
      </div>
      <div class="search-bar">
        <input type="text" placeholder="Search for products, brands and more" id="searchInput">
        <button class="search-btn"><i class="fas fa-search"></i></button>
      </div>
      <div class="header-right">
        <a href="#" class="header-link">
          <i class="fas fa-user"></i>
          <span>Login</span>
        </a>
        <div class="cart-icon" onclick="toggleCart()">
          <i class="fas fa-shopping-cart"></i>
          <span class="cart-count" id="cartCount">0</span>
        </div>
      </div>
    </header>

    <div class="product-container">
      <div class="product-images">
        <div class="main-image-container">
          <img src="https://m.media-amazon.com/images/I/71CXhVhpM0L.jpg" alt="Apple Watch Series 9" class="main-image" id="mainImage">
        </div>
        <div class="thumbnail-container" id="thumbnailContainer"></div>
      </div>
      <div class="product-details">
        <h1 class="product-title" id="productTitle"></h1>
        <div class="rating-container">
          <div class="rating" id="productRating">
            <span id="ratingValue"></span>
            <i class="fas fa-star"></i>
          </div>
          <span class="rating-text" id="ratingText"></span>
        </div>
        <div class="price-container">
          <span class="current-price" id="currentPrice"></span>
          <span class="original-price" id="originalPrice"></span>
          <span class="discount" id="discount"></span>
        </div>
        <div class="offers">
          <h3 class="section-title">Available offers</h3>
          <div id="offersList"></div>
        </div>
        <div class="specifications">
          <h3 class="section-title">Specifications</h3>
          <div id="specificationsList"></div>
        </div>
        <div class="action-buttons">
          <button class="btn btn-cart" onclick="addToCart()">
            <i class="fas fa-shopping-cart"></i> ADD TO CART
          </button>
          <button class="btn btn-buy" onclick="buyNow()">
            <i class="fas fa-bolt"></i> BUY NOW
          </button>
        </div>
      </div>
    </div>

    <!-- Cart Panel -->
    <div class="cart-panel" id="cartPanel">
      <div class="cart-header">
        <div class="cart-title">My Cart (<span id="cartItemCount">0</span>)</div>
        <button class="close-cart" onclick="toggleCart()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div id="cartItems"></div>
      <div id="emptyCart" class="empty-cart">
        <i class="fas fa-shopping-cart" style="font-size: 40px; color: #ddd; margin-bottom: 10px;"></i>
        <p>Your cart is empty</p>
        <p style="font-size: 14px;">Add items to get started</p>
      </div>
      <div class="cart-total">Total: ₹<span id="cartTotal">0</span></div>
    </div>
  </div>

  <!-- Buy Now Modal -->
  <div class="modal-overlay" id="buyNowModal">
    <div class="modal">
      <button class="btn-close" onclick="closeModal()">
        <i class="fas fa-times"></i>
      </button>
      
      <div id="orderForm">
        <div class="modal-header">
          <h2 class="modal-title">Delivery Details</h2>
          <p class="modal-subtitle">Enter your information to complete the order</p>
        </div>
        
        <div class="form-group">
          <label class="form-label">Full Name</label>
          <input type="text" id="name" class="form-input" placeholder="Enter your full name">
        </div>
        
        <div class="form-group">
          <label class="form-label">Mobile Number</label>
          <input type="tel" id="mobile" class="form-input" placeholder="Enter 10-digit mobile number">
        </div>
        
        <button class="btn btn-primary" onclick="sendOTP()" style="width: 100%; margin-bottom: 15px;">
          <i class="fas fa-mobile-alt"></i> Send OTP
        </button>
        
        <div class="form-group">
          <label class="form-label">Enter OTP</label>
          <input type="text" id="otp" class="form-input" placeholder="Enter 6-digit OTP">
        </div>
        
        <div class="form-group">
          <label class="form-label">Delivery Address</label>
          <textarea id="address" class="form-input form-textarea" placeholder="Enter full address with landmark"></textarea>
        </div>
        
        <button class="btn btn-secondary" onclick="getLocation()" style="width: 100%; margin-bottom: 10px;">
          <i class="fas fa-map-marker-alt"></i> Get My Location
        </button>
        <div id="locationDisplay" class="location-info">
          <i class="fas fa-info-circle"></i>
          <span>Location not yet fetched</span>
        </div>
        
        <div class="modal-footer">
          <button class="modal-btn btn-secondary" onclick="closeModal()">Cancel</button>
          <button class="modal-btn btn-primary" onclick="submitOrder()">Place Order</button>
        </div>
      </div>
      
      <div id="orderSuccess" style="display: none;">
        <div class="success-message">
          <div class="success-icon">
            <i class="fas fa-check-circle"></i>
          </div>
          <h3>Order Placed Successfully!</h3>
          <p>Your order ID: <strong>FLP123456</strong></p>
          <p>Estimated delivery: <strong>2-3 business days</strong></p>
          <button class="modal-btn btn-primary" onclick="closeModal()" style="margin-top: 20px;">
            Continue Shopping
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    let product = {
      title: 'Apple Watch Series 9 GPS (45mm) - Midnight Aluminum Case with Midnight Sport Band',
      rating: '4.5',
      ratingText: '45,234 Ratings & 3,456 Reviews',
      currentPrice: '₹41,900',
      originalPrice: '₹45,900',
      discount: '9% off',
      mainImage: 'https://m.media-amazon.com/images/I/71CXhVhpM0L.jpg',
      thumbnails: [
        'https://m.media-amazon.com/images/I/71CXhVhpM0L.jpg',
        'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQk8ANoxHoOiwBF2wTK4ZTFgB3Ow20FGLlgWg&s',
        'https://i.ytimg.com/vi/GHZwRPskGc4/maxresdefault.jpg',
        'https://www.designinfo.in/wp-content/uploads/2024/01/Samsung-Galaxy-S24-Ultra-512GB-Titanium-Black-5.webp'
      ],
      offers: [
        { tag: 'Bank Offer', text: '10% off on HDFC Bank Credit Card, up to ₹1,250 on orders of ₹5,000 and above' },
        { tag: 'Bank Offer', text: '5% Cashback on Flipkart Axis Bank Card' },
        { tag: 'Exchange', text: 'Up to ₹15,000 off on Exchange' },
        { tag: 'Special Price', text: 'Get extra 5% off (price inclusive of discount)' }
      ],
      specifications: [
        { label: 'Model Name', value: 'Apple Watch Series 9' },
        { label: 'Style', value: 'GPS' },
        { label: 'Display Size', value: '45mm Retina LTPO OLED' },
        { label: 'Battery Life', value: 'Up to 18 hours' },
        { label: 'Water Resistance', value: '50m water resistant' },
        { label: 'Processor', value: 'S9 SiP with 64-bit dual-core processor' },
        { label: 'Connectivity', value: 'Bluetooth, Wi-Fi, NFC' },
        { label: 'Compatibility', value: 'iPhone models running iOS 17 or later' }
      ]
    };

    let cart = [];

    window.onload = () => {

      document.getElementById('productTitle').textContent = product.title;
      document.getElementById('ratingValue').textContent = product.rating;
      document.getElementById('ratingText').textContent = product.ratingText;
      document.getElementById('currentPrice').textContent = product.currentPrice;
      document.getElementById('originalPrice').textContent = product.originalPrice;
      document.getElementById('discount').textContent = product.discount;
      document.getElementById('mainImage').src = product.mainImage;

      product.thumbnails.forEach((src, i) => {
        const img = document.createElement('img');
        img.src = src;
        img.className = 'thumbnail' + (i === 0 ? ' active' : '');
        img.onclick = () => changeImage(img, src);
        document.getElementById('thumbnailContainer').appendChild(img);
      });

      product.offers.forEach(o => {
        const div = document.createElement('div');
        div.className = 'offer-item';
        div.innerHTML = `
          <span class="offer-tag">${o.tag}:</span>
          <span class="offer-text">${o.text}</span>
        `;
        document.getElementById('offersList').appendChild(div);
      });

      product.specifications.forEach(s => {
        const div = document.createElement('div');
        div.className = 'spec-row';
        div.innerHTML = `
          <div class="spec-label">${s.label}</div>
          <div class="spec-value">${s.value}</div>
        `;
        document.getElementById('specificationsList').appendChild(div);
      });

      if (localStorage.getItem("cartOpen") === "true") {
        toggleCart();
      }


      const savedCart = localStorage.getItem("cart");
      if (savedCart) {
        cart = JSON.parse(savedCart);
        updateCartDisplay();
      }
    };

    function changeImage(img, src) {
      document.getElementById('mainImage').src = src;
      document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
      img.classList.add('active');
    }

    function toggleCart() {
      const panel = document.getElementById("cartPanel");
      const isShown = panel.classList.toggle("show");
      localStorage.setItem("cartOpen", isShown ? "true" : "false");
    }

    function updateCartDisplay() {
      const cartItems = document.getElementById("cartItems");
      const cartCount = document.getElementById("cartCount");
      const cartItemCount = document.getElementById("cartItemCount");
      const cartTotal = document.getElementById("cartTotal");
      const emptyCart = document.getElementById("emptyCart");
      
      cartItems.innerHTML = '';
      let total = 0;
      
      if (cart.length === 0) {
        emptyCart.style.display = 'block';
      } else {
        emptyCart.style.display = 'none';
        cart.forEach((item, index) => {
          const price = parseInt(item.currentPrice.replace(/₹|,/g, ''));
          total += price * item.qty;
          
          const div = document.createElement("div");
          div.className = "cart-item";
          div.innerHTML = `
            <div class="cart-item-name">${item.title.split(' ').slice(0, 3).join(' ')}...</div>
            <div class="cart-item-price">₹${(price * item.qty).toLocaleString('en-IN')}</div>
            <div class="cart-controls">
              <button onclick="changeQty(${index}, -1)">-</button>
              ${item.qty}
              <button onclick="changeQty(${index}, 1)">+</button>
              <button class="remove-btn" onclick="removeItem(${index})">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          `;
          cartItems.appendChild(div);
        });
      }
      
      const itemCount = cart.reduce((sum, item) => sum + item.qty, 0);
      cartCount.textContent = itemCount;
      cartItemCount.textContent = itemCount;
      cartTotal.textContent = total.toLocaleString('en-IN');
      
      localStorage.setItem("cart", JSON.stringify(cart));
    }

   

    function changeQty(index, change) {
      cart[index].qty += change;
      
      if (cart[index].qty <= 0) {
        cart.splice(index, 1);
      }
      
      updateCartDisplay();
    }

    function removeItem(index) {
      cart.splice(index, 1);
      updateCartDisplay();
    }

    function buyNow() {
      document.getElementById('buyNowModal').classList.add('show');
      document.getElementById('orderForm').style.display = 'block';
      document.getElementById('orderSuccess').style.display = 'none';
      
 
      document.getElementById('name').value = '';
      document.getElementById('mobile').value = '';
      document.getElementById('otp').value = '';
      document.getElementById('address').value = '';
      document.getElementById('locationDisplay').innerHTML = `
        <i class="fas fa-info-circle"></i>
        <span>Location not yet fetched</span>
      `;
    }

    function closeModal() {
      document.getElementById('buyNowModal').classList.remove('show');
    }

    function sendOTP() {
      const mobile = document.getElementById('mobile').value.trim();
      if (!mobile.match(/^[0-9]{10}$/)) {
        alert("Please enter a valid 10-digit mobile number.");
        return;
      }

      document.getElementById('otp').value = '123456';
      alert(`OTP sent to ${mobile}\n(Use 123456 for demo purposes)`);
    }

    function getLocation() {
      const display = document.getElementById('locationDisplay');
      display.innerHTML = `
        <i class="fas fa-sync-alt fa-spin"></i>
        <span>Fetching location...</span>
      `;
      
      // if (navigator.geolocation) {
      //   navigator.geolocation.getCurrentPosition(
      //     (position) => {
      //       const { latitude, longitude } = position.coords;
      //       display.innerHTML = `
      //         <i class="fas fa-check-circle"></i>
      //         <span>Location: ${latitude.toFixed(4)}, ${longitude.toFixed(4)}</span>
      //       `;
      //     },
      //     () => {
      //       display.innerHTML = `
      //         <i class="fas fa-exclamation-circle"></i>
      //         <span>Location permission denied</span>
      //       `;
      //     }
      //   );
      // } else {
      //   display.innerHTML = `
      //     <i class="fas fa-exclamation-circle"></i>
      //     <span>Geolocation not supported</span>
      //   `;
      // }
    }

    function submitOrder() {
      const name = document.getElementById('name').value.trim();
      const mobile = document.getElementById('mobile').value.trim();
      const otp = document.getElementById('otp').value.trim();
      const address = document.getElementById('address').value.trim();
      
      if (!name || !mobile || !otp || !address) {
        alert("Please fill all fields.");
        return;
      }
      
      if (otp !== "123456") {
        alert("Invalid OTP. Use 123456 for demo.");
        return;
      }
      
 
      document.getElementById('orderForm').style.display = 'none';
      document.getElementById('orderSuccess').style.display = 'block';
      

      cart = [];
      updateCartDisplay();
      localStorage.removeItem("cart");
    }
  </script>
</body>

</html>